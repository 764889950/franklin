# Module for the communication protocol.

single = {
	'NACK': '\x80',
	'ACK0': '\xb3',
	'STALL0': '\x87',
	'STALL1': '\x9e',
	'ID': '\xaa',
	'ACK1': '\xad',
	'DEBUG': '\xb4',
	'STARTUP': '\x99',
	}

ID_MAGIC = 'e1d5e6cb'	# 4 random characters from the unused single codes.

command = {
	'RESET': 0x00,
	'GOTO': 0x01,
	'RUN_FILE': 0x02,
	'PROBE': 0x03,
	'SLEEP': 0x04,
	'SETTEMP': 0x05,
	'WAITTEMP': 0x06,
	'READTEMP': 0x07,
	'READPOWER': 0x08,
	'SETPOS': 0x09,
	'GETPOS': 0x0a,
	'READ_GLOBALS': 0x0b,
	'WRITE_GLOBALS': 0x0c,
	'READ_SPACE_INFO': 0x0d,
	'READ_SPACE_AXIS': 0x0e,
	'READ_SPACE_MOTOR': 0x0f,
	'WRITE_SPACE_INFO': 0x10,
	'WRITE_SPACE_AXIS': 0x11,
	'WRITE_SPACE_MOTOR': 0x12,
	'READ_TEMP': 0x13,
	'WRITE_TEMP': 0x14,
	'READ_GPIO': 0x15,
	'WRITE_GPIO': 0x16,
	'QUEUED': 0x17,
	'READPIN': 0x18,
	'HOME': 0x19,
	'RECONNECT': 0x1a,
	'AUDIO_SETUP': 0x1b,
	'AUDIO_DATA': 0x1c,
	'RESUME': 0x1d,
	}

rcommand = {
	'TEMP': 0x40,
	'POWER': 0x41,
	'POS': 0x42,
	'DATA': 0x43,
	'PIN': 0x44,
	'QUEUE': 0x45,
	'HOMED': 0x46,
	'MOVECB': 0x47,
	'TEMPCB': 0x48,
	'CONTINUE': 0x49,
	'LIMIT': 0x4a,
	'TIMEOUT': 0x4b,
	'SENSE': 0x4c,
	'DISCONNECT': 0x4d,
	'UPDATE_TEMP': 0x4e,
	'UPDATE_PIN': 0x4f,
	'CONFIRM': 0x50,
	'FILE_DONE': 0x51,
	}

parsed = {
	'PARK': None,
	'SYSTEM': 0,
	'GOTO': 1,
	'GPIO': 2,
	'SETTEMP': 3,
	'WAITTEMP': 4,
	'SETPOS': 5,
	'WAIT': 6,
	'CONFIRM': 7,
}
